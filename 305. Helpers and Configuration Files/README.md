–ö–æ–Ω–µ—á–Ω–æ! –í–æ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –∫–æ–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ **Markdown** (`.md`), –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

---

````md
## üåê –ú–æ–¥—É–ª—å: helpers.js ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏

–í —ç—Ç–æ–º –º–æ–¥—É–ª–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ `getJSON`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ API —Å —É—á—ë—Ç–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

### üîß –ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```js
import { TIMEOUT_SEC } from './config.js';
```
````

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `TIMEOUT_SEC` ‚Äî —ç—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∫—É–Ω–¥, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –∂–¥—ë–º –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.

---

### ‚è≥ –§—É–Ω–∫—Ü–∏—è `timeout(s)`

```js
const timeout = function (s) {
  return new Promise(function (_, reject) {
    setTimeout(function () {
      reject(new Error(`Request took too long! Timeout after ${s} second`));
    }, s * 1000);
  });
};
```

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Promise`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è** —á–µ—Ä–µ–∑ `s` —Å–µ–∫—É–Ω–¥. –û–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "–∑–∞–≤–∏—Å–∞–Ω–∏—è" –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É –∑–∞–Ω–∏–º–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

---

### üì° –§—É–Ω–∫—Ü–∏—è `getJSON(url)`

```js
export const getJSON = async function (url) {
  try {
    const res = await Promise.race([fetch(url), timeout(TIMEOUT_SEC)]);
    const data = await res.json();

    if (!res.ok) throw new Error(`${data.message} (${res.status})`);
    return data;
  } catch (err) {
    throw err;
  }
};
```

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è:

1. –î–µ–ª–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É `url` —Å –ø–æ–º–æ—â—å—é `fetch`.
2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `Promise.race` –º–µ–∂–¥—É `fetch(url)` –∏ `timeout`, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–∂–∏–¥–∞–Ω–∏–µ, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç –∑–∞ `TIMEOUT_SEC` —Å–µ–∫—É–Ω–¥.
3. –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç ‚Äî –ø–∞—Ä—Å–∏—Ç –µ–≥–æ –∫–∞–∫ JSON.
4. –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ OK (`res.ok === false`) ‚Äî –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Ä–∞.
5. –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ ‚Äî –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–∞–ª—å—à–µ —Å –ø–æ–º–æ—â—å—é `throw err`, —á—Ç–æ–±—ã –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.

---

### ‚úÖ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```js
import { getJSON } from './helpers.js';

const data = await getJSON('https://api.example.com/data');
console.log(data);
```

---

### üí° –ó–∞—á–µ–º –Ω—É–∂–µ–Ω `throw err`?

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–Ω–µ "–ø—Ä–æ–≥–ª–æ—Ç–∏—Ç—å" –æ—à–∏–±–∫—É**, –∞ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å –µ—ë –¥–∞–ª—å—à–µ –ø–æ —Ü–µ–ø–æ—á–∫–µ. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç `getJSON`, —Å–º–æ–∂–µ—Ç —Å–∞–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å –ª–æ–≥).

---

### üß† –ò—Ç–æ–≥–æ:

- `timeout(s)` ‚Äî –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.
- `getJSON(url)` ‚Äî –Ω–∞–¥—ë–∂–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ —Ç–∞–π–º–∞—É—Ç–æ–º.
- –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è API-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –∏ —Å–µ—Ä–≤–∏—Å–∞—Ö.

```

---

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–≥—É –¥–æ–±–∞–≤–∏—Ç—å —Ç—É–¥–∞ –ø—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫, UI-–ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏–ª–∏ –¥–∞–∂–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã.
```

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ —à–∞–≥–∞–º, **—á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è `init()`** –∏ –∫–∞–∫ –æ–Ω–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –º–µ—Ç–æ–¥–æ–º `addHandlerRender()` –≤ –∫–ª–∞—Å—Å–µ `RecipeView`.

---

## üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è `init()`:

```js
const init = function () {
  recipeView.addHandlerRender(controlRecipes);
};
```

–≠—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è (–æ—Ç—Å—é–¥–∞ –∏ –∏–º—è `init`). –û–Ω–∞ **–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π**, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ:

- –í—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `addHandlerRender()` —É –æ–±—ä–µ–∫—Ç–∞ `recipeView`.
- –ò **–ø–µ—Ä–µ–¥–∞—ë—Ç –≤ –Ω–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏—é `controlRecipes` –∫–∞–∫ –∫–æ–ª–±—ç–∫**.

---

## üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `addHandlerRender()` –≤ `RecipeView`:

```js
addHandlerRender(handler) {
  ['hashchange', 'load'].forEach(ev => window.addEventListener(ev, handler));
}
```

–û–Ω **–Ω–∞–≤–µ—à–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π** –Ω–∞ `window`:

- `hashchange`: –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —á–∞—Å—Ç—å URL –ø–æ—Å–ª–µ `#` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `#5ed6604591c37cdc054bc886`).
- `load`: –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.

–ò –æ–±–∞ —Ä–∞–∑–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚Äî **–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ `controlRecipes()`**.

---

## üß© –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

–≠—Ç–æ **–∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –ø—Ä—è–º–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ `controller.js`**, –≤—Ä–æ–¥–µ:

```js
window.addEventListener('hashchange', controlRecipes);
```

‚Üí –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –¥–µ–ª–∞–µ–º **–æ–¥–∏–Ω –≤—ã–∑–æ–≤ `recipeView.addHandlerRender(...)`**, –∏ `View` —Å–∞–º –∑–Ω–∞–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä.

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥:

- **–ß–∏—â–µ**
- **–ú–æ–¥—É–ª—å–Ω–µ–µ** (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç DOM)
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ MVC** (View ‚Üí –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏ —Å–æ–æ–±—â–∞–µ—Ç Controller'—É)

---

## üîÑ –û–±—â–∞—è —Ü–µ–ø–æ—á–∫–∞:

```
1. init() –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
2. recipeView.addHandlerRender(controlRecipes)
3. –ù–∞–≤–µ—à–∏–≤–∞—é—Ç—Å—è —Å–æ–±—ã—Ç–∏—è hashchange –∏ load
4. –ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è controlRecipes()
5. controlRecipes –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç render() –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

---

## üß† –ò—Ç–æ–≥–æ:

- `init()` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤—É—é –ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- –û–Ω–∞ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç `View` (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ `recipeView`) —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Å–æ–±—ã—Ç–∏–π.
- –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `View` –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è, –∞ `Controller` —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –±–ª–æ–∫-—Å—Ö–µ–º—É –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π —à–∞–±–ª–æ–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö `addHandler...` –º–µ—Ç–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∫–Ω–æ–ø–æ–∫).
