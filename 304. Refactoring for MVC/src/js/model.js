// –≠—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
// –ó–¥–µ—Å—å –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –∫ –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∏–∑ —Ä–∞–∑–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.
export const state = {
  recipe: {}, // –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç (—Ç–æ—Ç, —á—Ç–æ –æ—Ç–∫—Ä—ã—Ç)
};

// –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Ü–µ–ø—Ç–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ ID.
// –û–Ω–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞–ø—Ä—è–º—É—é, –∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ state.recipe.
export const loadRecipe = async function (id) {
  try {
    // 1. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º GET-–∑–∞–ø—Ä–æ—Å –∫ API –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É ID —Ä–µ—Ü–µ–ø—Ç–∞
    const res = await fetch(
      `https://forkify-api.herokuapp.com/api/v2/recipes/${id}`
    );

    // 2. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–≤–µ—Ç –≤ JSON
    const data = await res.json();

    // 3. –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 404), –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
    if (!res.ok) throw new Error(`${data.message} (${res.status})`);

    // 4. –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç–∞ –∏–∑ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ data.data.recipe
    const { recipe } = data.data;

    // 5. –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º —Å–≤–æ–π—Å—Ç–≤–∞ API –≤ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–µ –∏ —É–¥–æ–±–Ω—ã–µ –∏–º–µ–Ω–∞
    state.recipe = {
      id: recipe.id,
      title: recipe.title,
      publisher: recipe.publisher,
      sourceUrl: recipe.source_url,
      image: recipe.image_url,
      servings: recipe.servings,
      cookingTime: recipe.cooking_time,
      ingredients: recipe.ingredients,
    };
  } catch (err) {
    // –í—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–≤–æ–¥–∏–º –æ—à–∏–±–∫—É –≤ –∫–æ–Ω—Å–æ–ª—å (–≤ –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
    console.error(`${err} üí•üí•üí•üí•`);
  }
};

/* –û–±—â–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ:
–≠—Ç–æ—Ç –∫–æ–¥ —Ä–µ–∞–ª–∏–∑—É–µ—Ç "Model" –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ MVC.

–û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏: –∑–∞–≥—Ä—É–∑–∫—É, —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ.

–§—É–Ω–∫—Ü–∏—è loadRecipe(id):

–¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API,

–ø–æ–ª—É—á–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç–∞,

—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ state.recipe,

–∏ –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ ‚Äî –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç, –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—ç—Ç–∏–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏ view).

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –º–æ–≥—É –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫, loading-—Ñ–ª–∞–≥ –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –¥–ª—è –¥—Ä—É–≥–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. */
